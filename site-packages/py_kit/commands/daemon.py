# -*- coding: utf-8 -*-


from cve_ease.conf import gconfig

import logging
import argparse
from .base import BaseCommand
from cve_ease.core import daemon

logger = logging.getLogger('cve-ease')



class DaemonCommand(BaseCommand):
    """daemon"""
    parser = None
    @staticmethod
    def register(subparsers):
        DaemonCommand.parser = subparsers.add_parser('daemon', help='for systemd service')
        DaemonCommand.parser.add_argument('-r', '--run', dest='run', action='store_true', default=False,
                          help='run server')
        DaemonCommand.parser.add_argument('-t', '--test', dest='test', action='store_true', default=False,
                          help='just for test')
        DaemonCommand.parser.add_argument('-v', '--verbose', dest='verbose', action='store_true', default=False,
                          help='show verbose output')


    def handle(self, options):
        """[basic] for systemd service"""

        if options.verbose:
            print(gconfig['main']['workdir'])
            print("for systemd service verbose")
        elif options.run:
            daemon.run_server()
        elif options.test:
            pass
        else:
            print("for systemd service")